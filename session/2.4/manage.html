<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="keywords" content="php, session, session manager, session redis, session database">
<meta name="description" content="Learn how to manage sessions">
<title>Session management | Opis Session</title>
        
        <link href="/assets/img/favicon.png" rel="shortcut icon">
        
        
        
<link rel="stylesheet" href="/assets/css/flatly-theme.min.css">

<link href="/assets/css/font-awesome.css" rel="stylesheet">

<link href="/assets/css/syntax.css" rel="stylesheet">



<link href="/assets/css/project.css" rel="stylesheet">


        <!--[if lt IE 9]>
<script src="/assets/js/html5shiv.js"></script>
<script src="/assets/js/respond.min.js"></script>
<![endif]-->
<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="/assets/js/jquery-1.11.0.min.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="/assets/js/bootstrap.min.js"></script>


<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  
    ga('create', 'UA-50415801-1', 'opis.io');
    ga('send', 'pageview');
</script>

    </head>
    <body>
        
<header id="header" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <img src="/assets/img/opis-gs-100.png" class="img-responsive opis-inline-logo">
            <a href="" class="navbar-brand">
                <strong>
                    Session
                </strong>
            </a>
            <button data-target="#navbar-main" data-toggle="collapse" type="button" class="navbar-toggle">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
        </div>
        <nav id="navbar-main" class="collapse navbar-collapse navbar-right">
            <ul class="nav navbar-nav">
                <li>
                    <a href="/" title="Main page">
                        <span class="fa fa-home"></span> Home
                    </a>
                </li>
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <span class="fa fa-cogs"></span> Components <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="/cache" title="Caching library">Cache</a></li>
                        <li><a href="/closure" title="Serializable closures">Closure</a></li>
                        <li><a href="/config" title="Configuration manager">Config</a></li>
                        <li><a href="/container" title="Dependency injection container">Container</a></li>
                        <li><a href="/database" title="Database abstraction layer">Database</a></li>
                        <li><a href="/events" title="Events library">Events</a></li>
                        <li><a href="https://github.com/opis/http" title="HTTP library">HTTP</a></li>
                        <li><a href="/http-routing" title="HTTP routing library">HTTP Routing</a></li>
                        <li><a href="/routing" title="Routing framework">Routing</a></li>
                        <li><a href="/session" title="Session manager">Session</a></li>
                        <li><a href="/utils" title="Utilitary classes">Utils</a></li>
                        <li><a href="/view" title="Rendering engine">View</a></li>
                    </ul>
                </li>
                
    
    

<li class="dropdown">
    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
        <span class="fa fa-tags"></span> Versions <span class="caret"></span>
    </a>
    <ul class="dropdown-menu">
    
        
        <li><a href="/session">Latest version</a></li>
        
    
        
        
        <li><a href="/session/2.4">Version 2.4</a></li>
        
    
    </ul>
</li>

                <li>
                    <a href="https://github.com/opis/session/tree/2.4" title="Github page">
                        <span class="fa fa-github fa-lg"></span> GitHub
                    </a>
                </li>
            </ul>
        </nav>
    </div>
</header>

<section>
    <div class="container">
        <div class="row">
            <div class="col-md-4">
                <div class="list-group">
                
                    
                        
<a href="/session/2.4" class="list-group-item">

    <h4 class="list-group-item-heading">About</h4>
    <p class="list-group-item-text text-muted">
        Getting started with Opis Session
    </p>
</a>
                    
                
                    
                        
<a href="/session/2.4/init.html" class="list-group-item">

    <h4 class="list-group-item-heading">Initiating a session</h4>
    <p class="list-group-item-text text-muted">
        Learn how to initiate a session
    </p>
</a>
                    
                
                    
                        
<a href="/session/2.4/manage.html" class="list-group-item active">

    <h4 class="list-group-item-heading">Session management</h4>
    <p class="list-group-item-text text-muted">
        Learn how to manage sessions
    </p>
</a>
                    
                
                </div>
            </div>
            <div class="col-md-8">
                
        


        

<h1>
    
    <strong>Session management</strong>
    
</h1>

<p>
    Adding data to a session is done by calling the <code>set</code> method. 
</p>

<div class="highlight"><pre><code class="php"><span class="nv">$session</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;John Doe&#39;</span><span class="p">);</span>
</code></pre></div>

<p>
    Retrieving data from session is done using the <code>get</code> method.
</p>

<div class="highlight"><pre><code class="php"><span class="nv">$session</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">);</span>
</code></pre></div>

<p>
    You can also tell the method to return a custom value if the specified key does not exist.
    The default return value for nonexistent keys is  <code>null</code>.
</p>

<div class="highlight"><pre><code class="php"><span class="nv">$session</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="mi">18</span><span class="p">);</span>
</code></pre></div>

<p>
    You can also retrieve an item from session by using the <code>load</code> method. This
    method takes two arguments: a string representing the session key and an anonymous function callback.
    If no value was stored under the specified key, the the value returned by the callback
    is stored under that key and then returned.
</p>

<div class="highlight"><pre><code class="php"><span class="nv">$session</span><span class="o">-&gt;</span><span class="na">load</span><span class="p">(</span><span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$key</span><span class="p">){</span>
    <span class="k">return</span> <span class="mi">18</span><span class="p">;</span>
<span class="p">});</span>
</code></pre></div>

<p>
    You can check if a value was stored under a certain key by calling the <code>has</code> method.
</p>

<div class="highlight"><pre><code class="php"><span class="nv">$session</span><span class="o">-&gt;</span><span class="na">has</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">);</span>
</code></pre></div>

<p>
    Deleting data from session is done using the <code>delete</code> method.
</p>

<div class="highlight"><pre><code class="php"><span class="nv">$session</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">);</span>
</code></pre></div>

<p>
    Removing all session data is done using the <code>clear</code> method.
</p>

<div class="highlight"><pre><code class="php"><span class="nv">$session</span><span class="o">-&gt;</span><span class="na">clear</span><span class="p">();</span>
</code></pre></div>


        


    


        

<h3>
    
    
    <strong>Flash data</strong>
    
    <a id="flash-data" href="#flash-data" class="link-anchor"><span class="fa fa-link"></span></a>
</h3>

<p>
    Flash data are values stored into session that expires after the next request.
    Accessing the flash storage is done using the <code>flash</code> method.
</p>

<p>
    Setting flash data is done by accessing the flash storage and calling the <code>set</code> method.
</p>

<div class="highlight"><pre><code class="php"><span class="nv">$session</span><span class="o">-&gt;</span><span class="na">flash</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">);</span>
</code></pre></div>

<p>
    Retrieving data from flash session is done by accessing the flash storage and calling
    the <code>get</code> method.
</p>

<div class="highlight"><pre><code class="php"><span class="nv">$session</span><span class="o">-&gt;</span><span class="na">flash</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">);</span>
</code></pre></div>

<p>
    You can also tell the method to return a custom value if the specified key does not exist.
    The default return value for nonexistent keys is  <code>null</code>.
</p>

<div class="highlight"><pre><code class="php"><span class="nv">$session</span><span class="o">-&gt;</span><span class="na">flash</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="s1">&#39;Some default value&#39;</span><span class="p">);</span>
</code></pre></div>

<p>
    You can also retrieve data from flash session by accessing the flash storage and using the <code>load</code> method. This
    method takes two arguments: a string representing the session key and an anonymous function callback.
    If no value was stored under the specified key, the the value returned by the callback
    is stored under that key and then returned.
</p>

<div class="highlight"><pre><code class="php"><span class="nv">$session</span><span class="o">-&gt;</span><span class="na">flash</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">load</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$key</span><span class="p">){</span>
    <span class="k">return</span> <span class="s1">&#39;Some default value&#39;</span><span class="p">;</span>
<span class="p">});</span>
</code></pre></div>

<p>
    Checking if some flash data key exists is done by accessing the flash storage and using
    the <code>has</code> method.
</p>

<div class="highlight"><pre><code class="php"><span class="nv">$session</span><span class="o">-&gt;</span><span class="na">flash</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">has</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">);</span>
</code></pre></div>

<p>
    Deleting data from flash session is done by accessing the flash storage and using the <code>delete</code> method.
</p>

<div class="highlight"><pre><code class="php"><span class="nv">$session</span><span class="o">-&gt;</span><span class="na">flash</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">);</span>
</code></pre></div>

<p>
    You can clear all flash data by accesing the flash storage and calling the <code>clear</code>
    method. 
</p>

<div class="highlight"><pre><code class="php"><span class="nv">$session</span><span class="o">-&gt;</span><span class="na">flash</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">clear</span><span class="p">();</span>
</code></pre></div>

<p>
    This method optionally accepts an array as argument, representing the new flash data.
</p>

<div class="highlight"><pre><code class="php"><span class="nv">$session</span><span class="o">-&gt;</span><span class="na">flash</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">clear</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;newKey&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;New value&#39;</span><span class="p">,</span>
<span class="p">));</span>
</code></pre></div>

<p>
    You can extend the life of the flash data by calling the <code>reflash</code> method
    or by accessing the flash storage and calling the <code>reflash</code> method.
</p>

<div class="highlight"><pre><code class="php"><span class="nv">$session</span><span class="o">-&gt;</span><span class="na">reflash</span><span class="p">();</span>
<span class="c1">//or</span>
<span class="nv">$session</span><span class="o">-&gt;</span><span class="na">flash</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">reflash</span><span class="p">();</span>
</code></pre></div>

<p>
    Extending the life of flash data that are stored under certain keys is done by passing
    an array containing the key names to the methods presented above.
</p>

<div class="highlight"><pre><code class="php"><span class="nv">$session</span><span class="o">-&gt;</span><span class="na">reflash</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">));</span>
<span class="c1">//or</span>
<span class="nv">$session</span><span class="o">-&gt;</span><span class="na">flash</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">reflash</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">));</span>
</code></pre></div>

<p>
    You can retrieve an array with all stored flash data, by accessing the flash storage and calling the <code>toArray</code> method.
</p>

<div class="highlight"><pre><code class="php"><span class="nv">$session</span><span class="o">-&gt;</span><span class="na">flash</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">toArray</span><span class="p">();</span>
</code></pre></div>


        


    


        

<h3>
    
    
    <strong>Session security</strong>
    
    <a id="session-security" href="#session-security" class="link-anchor"><span class="fa fa-link"></span></a>
</h3>

<p>
    Retrieving the session ID is done by calling the <code>id</code> method.
</p>

<div class="highlight"><pre><code class="php"><span class="nv">$session</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">();</span>
</code></pre></div>

<p>
    Regenerating the session ID can be done by using the <code>regenerate</code> method.
</p>

<div class="highlight"><pre><code class="php"><span class="nv">$session</span><span class="o">-&gt;</span><span class="na">regenerate</span><span class="p">();</span>
</code></pre></div>

<p>
    If you want to regenerate the session ID and also keep all data associated with the old session
    ID, you must paste <code>true</code> as an argument to the <code>regenerate</code> method.
</p>

<div class="highlight"><pre><code class="php"><span class="nv">$session</span><span class="o">-&gt;</span><span class="na">regenerate</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
</code></pre></div>

<p>
    Destroing a session is done using the <code>destroy</code> method.
</p>

<div class="highlight"><pre><code class="php"><span class="nv">$session</span><span class="o">-&gt;</span><span class="na">destroy</span><span class="p">();</span>
</code></pre></div>

                





    
        
            
                
            
        
    

    
        
            
                
            
        
    

    
        
            
        
    


<ul class="pager">
  
  <li class="previous"><a href="/session/2.4/init.html" title="Initiating a session">&larr; Back</a></li>
  
  
</ul>
                
            </div>
        </div>
    </div>
</section>

<footer class="text-center text-muted">
    Copyright &copy; 2014-2015 Marius Sarca. All rights reserved.
</footer>

    </body>
</html>
