<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="keywords" content="php, full-stack, framework, php framework, modules, modular framework">
<meta name="description" content="Learn about collectors and how to use them">
<title>Collectors | Opis Colibri</title>
        
        <link href="/assets/img/favicon.png" rel="shortcut icon">
        
        
        
<link rel="stylesheet" href="/assets/css/paper-theme.min.css">

<link href="/assets/css/font-awesome.css" rel="stylesheet">

<link href="/assets/css/syntax.css" rel="stylesheet">



<link href="/assets/css/colibri.css" rel="stylesheet">


        <!--[if lt IE 9]>
<script src="/assets/js/html5shiv.js"></script>
<script src="/assets/js/respond.min.js"></script>
<![endif]-->
<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="/assets/js/jquery-1.11.0.min.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="/assets/js/bootstrap.min.js"></script>


<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  
    ga('create', 'UA-50415801-1', 'opis.io');
    ga('send', 'pageview');
</script>

    </head>
    <body>
        <header id="header" class="navbar navbar-default">
    <div class="container">
        <div class="navbar-header">
            <a href="/colibri">
                <img src="/assets/img/opis-colibri.png" class="img-responsive opis-inline-logo">
            </a>
            <button data-target="#navbar-main" data-toggle="collapse" type="button" class="navbar-toggle">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
        </div>
        <nav id="navbar-main" class="collapse navbar-collapse navbar-right">
            <ul class="nav navbar-nav">
                <li>
                    <a href="/colibri/documentation" title="Documentation">
                        <span class="fa fa-file-text"></span> Documentation
                    </a>
                </li>
                <li>
                    <a href="https://github.com/opis/colibri" title="Github page">
                        <span class="fa fa-github fa-lg"></span> GitHub
                    </a>
                </li>
                <li>
                    <a href="/" title="Main page">
                        <span class="fa fa-home"></span> Home
                    </a>
                </li>
            </ul>
        </nav>
    </div>
</header>

<section>
    <div class="container">
    <div class="row">
        <div class="col-md-4">
            
<ul class="navigation">

    
        
            
        
        <li class="chapter">Quick start</li>
        <ul>
            <li><a href="/colibri/documentation" title="Learn how to install Opis Colibri">Installation</a></li>
    

    
        
        </ul>
        
        <li class="chapter">The basics</li>
        <ul>
            <li><a href="/colibri/documentation/modules.html" title="Learn about modules and how to create them">Modules</a></li>
    

    
        <li><a href="/colibri/documentation/collectors.html" title="Learn about collectors and how to use them">Collectors</a></li>
    

    
        <li><a href="/colibri/documentation/installer.html" title="Learn about installers and what they do">Installers</a></li>
    

    
        <li><a href="/colibri/documentation/classes.html" title="Learn about modules' classes">Classes</a></li>
    

    
        <li><a href="/colibri/documentation/assets.html" title="Learn about Opis Colibri assets">Assets</a></li>
    

    
        <li><a href="/colibri/documentation/functions.html" title="Learn about framework's global functions">Global functions</a></li>
    

    
        
        </ul>
        
        <li class="chapter">Administration</li>
        <ul>
            <li><a href="/colibri/documentation/console.html" title="Learn about available console commands">Console commands</a></li>
    

    
        
        </ul>
        
        <li class="chapter">Collectible items</li>
        <ul>
            <li><a href="/colibri/documentation/routes.html" title="Learn about Opis Colibri routes">Routes</a></li>
    

    
        <li><a href="/colibri/documentation/route-aliases.html" title="Learn about Opis Colibri route aliases">Route aliases</a></li>
    

    
        <li><a href="/colibri/documentation/dispatchers.html" title="Learn about Opis Colibri dispatchers">Dispatchers</a></li>
    

    
        <li><a href="/colibri/documentation/views.html" title="Learn about Opis Colibri views">Views</a></li>
    

    
        <li><a href="/colibri/documentation/view-engines.html" title="Learn about Opis Colibri view engines">View engines</a></li>
    

    
        <li><a href="/colibri/documentation/contracts.html" title="Learn about Opis Colibri contracts">Contracts</a></li>
    

    
        <li><a href="/colibri/documentation/events.html" title="Learn about Opis Colibri event handlers">Event handlers</a></li>
    

    
        <li><a href="/colibri/documentation/databases.html" title="Learn about database connections">Database connections</a></li>
    

    
        <li><a href="/colibri/documentation/session.html" title="Learn about Opis Colibri sessions">Session storages</a></li>
    

    
        <li><a href="/colibri/documentation/cache.html" title="Learn about Opis Colibri cache storages">Cache storages</a></li>
    

    
        <li><a href="/colibri/documentation/config.html" title="Learn about Opis Colibri config storages">Config storages</a></li>
    

    
        <li><a href="/colibri/documentation/validators.html" title="Learn about Opis Colibri validators">Validators</a></li>
    

    
        <li><a href="/colibri/documentation/translations.html" title="Learn about Opis Colibri translations">Translations</a></li>
    

    
        <li><a href="/colibri/documentation/variables.html" title="Learn about Opis Colibri variables">Variables</a></li>
    

    </ul>
</ul>

        </div>
        <div class="col-md-8">
            
    


    

<h2>
    
    Collectors
    
</h2>

<ol class="submenu">
    <li>




    

<a href="#introduction">Introduction</a></li>
    <li>




    

<a href="#the-collector-file">The collector file</a></li>
    <li>




    

<a href="#controlling-the-collecting-process">Controlling the collecting process</a></li>
</ol>


        


    


    


    

<h3>
    
    
    Introduction
    
    <a id="introduction" href="#introduction" class="link-anchor"><span class="fa fa-link"></span></a>
</h3>

<p>
    Collectors are the heart of the Opis Colibri framework. They are used to gather information about
    all kind of collectible items used by the framework, ranging from <em>routes</em>, <em>views</em> to
    <em>cache storages</em> or other user defined items, like <em>database connections</em>. 
</p>

<p>
    The items are collected with the help of the <code>Opis\Colibri\Define</code> class.
</p>

<div class="highlight"><pre><code class="php"><span class="k">use</span> <span class="nx">Opis\Colibri\Define</span><span class="p">;</span>

<span class="nx">Define</span><span class="o">::</span><span class="na">SomeResource</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="nv">$collector</span><span class="p">){</span>
    <span class="c1">// Collect here</span>
<span class="p">});</span>
</code></pre></div>


        


    


    


    

<h3>
    
    
    The collector file
    
    <a id="the-collector-file" href="#the-collector-file" class="link-anchor"><span class="fa fa-link"></span></a>
</h3>

<p>
    All collectors must be used inside a special file called <em>the collector file</em>.
    The collector file is where we'll declare all our collectible items that will be used by the framework.
    Having a collector file is not mandatory, but of course, without a collector file
    we can't collect resources and the most we can do with a module is to <a href="assets.html">provide assets</a> for other modules.
</p>

<p>
    By default, the name of the collector file is formed from the name of the module followed
    by the <code>.module.php</code> suffix. So if your module's name is <code>foo</code>, your
    collector's filename will be <code>foo.module.php</code>. You can change the name
    of the collector file by adding a
    <a href="/colibri/documentation/modules.html#module.json-collector">collector</a> property into the <code>module.json</code> file.
</p>

<ul class="file-tree">
    <li>
        <span class="fa fa-folder-open"></span> modules
        <ul class="file-tree">
            <li><span class="fa fa-folder"></span> welcome</li>
            <li>
                <span class="fa fa-folder-open"></span> example
                <ul class="file-tree">
                    <li><span class="fa fa-file-text"></span> example.module.json</li>
                    <li class="text-primary"><span class="fa fa-file-text"></span> example.module.php</li>
                </ul>
            </li>
        </ul>
    </li>
    <li><span class="fa fa-folder"></span> public</li>
    <li><span class="fa fa-folder"></span> storage</li>
    <li><span class="fa fa-folder"></span> system</li>
    <li><span class="fa fa-folder"></span> vendor</li>
    <li><span class="fa fa-file-text"></span> bootstrap.php</li>
    <li><span class="fa fa-file-text"></span> CHANGELOG.md</li>
    <li><span class="fa fa-file-text"></span> colibri</li>
    <li><span class="fa fa-file-text"></span> composer.json</li>
    <li><span class="fa fa-file-text"></span> composer.lock</li>
    <li><span class="fa fa-file-text"></span> LICENSE</li>
    <li><span class="fa fa-file-text"></span> README.md</li>
</ul>


        


    


    


    

<h3>
    
    
    Controlling the collecting process
    
    <a id="controlling-the-collecting-process" href="#controlling-the-collecting-process" class="link-anchor"><span class="fa fa-link"></span></a>
</h3>

<p>
    In order to control the collecting process, Opis Colibri provides a simple and yet very efficient
    mechanism: priorities.
</p>

<p>
    Setting a collecting priority is done by passing as the second argument to the collecting method
    an integer number. If the second argument is omitted, the default collecting priority will be used.
    The default collecting priority is <code>0</code>(zero).
</p>

<div class="highlight"><pre><code class="php"><span class="k">use</span> <span class="nx">Opis\Colibri\Define</span><span class="p">;</span>

<span class="nx">Define</span><span class="o">::</span><span class="na">SomeResource</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="nv">$collector</span><span class="p">){</span>
    <span class="c1">// Collect here</span>
<span class="p">},</span> <span class="mi">1</span><span class="p">);</span>
</code></pre></div>

<p>
    Items collected using a higher priority will be collected sooner
    and those collected using a lower priority will be collected later.
    In this way, by setting a higher priority we can overwrite an existing
    <a href="routes.html">route</a>,
    declared by another module, without even touch that module's collector file.
    Same thing is true when it comes to overwrite a <a href="contracts.html">contract</a> or a
    <a href="databases.html">database</a> connection, but instead of using a higher priority we will use
    a lower one.
</p>


            





    
        
            
                
            
        
    

    
        
            
                
            
        
    

    
        
            
        
    

    
        
            
                
                
            
        
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    


<ul class="pager">
  
  <li class="previous"><a href="/colibri/documentation/modules.html" title="Modules">&larr; Back</a></li>
  
  
  <li class="next"><a href="/colibri/documentation/installer.html" title="Installers">Next &rarr;</a></li>
  
</ul>
            
        </div>
    </div>
    <a href="#0" id="back-to-top">
        <span class="fa fa-arrow-up"></span>
    </a>
</div>
<script>
    (function($){
        
        $(document).ready(function(){
           var visible = false;
           $(window).scroll(function(){
                var top = $(this).scrollTop();
                
                if (top >= 100 && !visible) {
                   visible = true;
                   $('#back-to-top').fadeIn().show();
                 }
                 if(top < 100 && visible){
                   visible = false;
                   $('#back-to-top').fadeOut();  
                 }
           });
           
            $('#back-to-top').click(function(){
                $('html, body').animate({scrollTop : 0},800);
                return false;
            });
            
        });
        
        
    })(jQuery);
</script>
</section>

<footer class="text-center text-muted">
    Copyright &copy; 2014-2015 Marius Sarca. All rights reserved.
</footer>

    </body>
</html>
