<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="keywords" content="php, cache, database cache, file cache, multiple storages">
<meta name="description" content="Learn how to use the library and how to deal with cached content">
<title>Using the library | Opis Cache</title>
        
        <link href="/assets/img/favicon.png" rel="shortcut icon">
        
        <link rel="stylesheet" href="/assets/css/flatly-theme.min.css">
<link href="/assets/css/font-awesome.css" rel="stylesheet">

<link href="/assets/css/syntax.css" rel="stylesheet">



<link href="/assets/css/style.css" rel="stylesheet">


        <!--[if lt IE 9]>
<script src="/assets/js/html5shiv.js"></script>
<script src="/assets/js/respond.min.js"></script>
<![endif]-->
<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="/assets/js/jquery-1.11.0.min.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="/assets/js/bootstrap.min.js"></script>


<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  
    ga('create', 'UA-50415801-1', 'opis.io');
    ga('send', 'pageview');
</script>

    </head>
    <body>
        <header id="header" class="navbar">
    <div class="container">
        <div class="navbar-header">
            <button data-target=".navbar-collapse" data-toggle="collapse" class="navbar-toggle" type="button">
                <span class="sr-only">Toggle navigation</span>
                <i class="fa fa-bars fa-2x"></i>
            </button>
            <h3 class="text-muted">
                <img src="/assets/img/opis-100.png" class="img-responsive opis-inline-logo">
                <strong>Cache</strong>
            </h3>
        </div>
        <nav class="collapse navbar-collapse navbar-right" role="navigation">
            <ul class="nav navbar-nav">
                <li>
                    <a href="http://www.opis.io" title="Main page">
                        <span class="fa fa-home"></span> Home
                    </a>
                </li>
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <span class="fa fa-cogs"></span> Components <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="/cache" title="Caching library">Cache</a></li>
                        <li><a href="/closure" title="Serializable closures">Closure</a></li>
                        <li><a href="/config" title="Configuration manager">Config</a></li>
                        <li><a href="/container" title="Dependency injection container">Container</a></li>
                        <li><a href="/database" title="Database abstraction layer">Database</a></li>
                        <li><a href="/events" title="Events library">Events</a></li>
                        <li><a href="https://github.com/opis/http" title="HTTP library">HTTP</a></li>
                        <li><a href="/http-routing" title="HTTP routing library">HTTP Routing</a></li>
                        <li><a href="/routing" title="Routing framework">Routing</a></li>
                        <li><a href="/session" title="Session manager">Session</a></li>
                        <li><a href="/utils" title="Utilitary classes">Utils</a></li>
                        <li><a href="/view" title="Rendering engine">View</a></li>
                    </ul>
                </li>
                <li>
                    <a href="https://github.com/opis/cache" title="Github page">
                        <span class="fa fa-github fa-lg"></span> GitHub
                    </a>
                </li>
            </ul>
        </nav>
    </div>
</header>
<div class="container">
    <div class="row">
        <div class="col-md-4">
            <div class="list-group">
            
                
                    
<a href="/cache" class="list-group-item">

    <h4 class="list-group-item-heading">About</h4>
    <p class="list-group-item-text text-muted">
        Getting started with Opis Cache
    </p>
</a>
                
            
                
                    
<a href="/cache/use.html" class="list-group-item active">

    <h4 class="list-group-item-heading">Using the library</h4>
    <p class="list-group-item-text text-muted">
        Learn how to use the library
    </p>
</a>
                
            
                
                    
<a href="/cache/collection.html" class="list-group-item">

    <h4 class="list-group-item-heading">Storage collection</h4>
    <p class="list-group-item-text text-muted">
        Learn how to create and use storage collections
    </p>
</a>
                
            
                
                    
<a href="/cache/storage.html" class="list-group-item">

    <h4 class="list-group-item-heading">Add new storages</h4>
    <p class="list-group-item-text text-muted">
        Learn how you can add support for new storages
    </p>
</a>
                
            
            </div>
        </div>
        <div class="col-md-8">
            <h1><strong>Using the library</strong></h1>

<p>
    Working with cached content is done by using the <code>Opis\Cache\Cache</code> class.
    The constructor of this class takes as an argument an instance of the the <code>Opis\Cache\StorageInterface</code>,
    representing the backend storage where you will write and read from.
</p>

<div class="highlight"><pre><code class="php"><span class="k">use</span> <span class="nx">Opis\Cache\Cache</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Opis\Cache\Storage\Memory</span> <span class="k">as</span> <span class="nx">CacheStorage</span><span class="p">;</span>

<span class="nv">$cache</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Cache</span><span class="p">(</span><span class="k">new</span> <span class="nx">CacheStorage</span><span class="p">());</span>
</code></pre></div>

<p>
    All content is stored using key-value pairs and storing a value is
    done by calling the <code>write</code> method. The method takes as a first argument a
    string, representing the key, and as a second argument the value you want to be stored.
    The method returns <code>true</code> if the content was cached successfully and <code>false</code>
    otherwise.
</p>

<div class="highlight"><pre><code class="php"><span class="nv">$cache</span><span class="o">-&gt;</span><span class="na">write</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="s1">&#39;Hello World!&#39;</span><span class="p">);</span>
</code></pre></div>

<p>
    Optionally, you can specify how long will be the cached content available, by passing a
    third argument to the <code>write</code> method, representing the amount of time expressed in seconds.
    By default the cached content is available for an undetermined period.
</p>

<div class="highlight"><pre><code class="php"><span class="c1">//The content will expire after 1 hour</span>
<span class="nv">$cache</span><span class="o">-&gt;</span><span class="na">write</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="s1">&#39;Hello World!&#39;</span><span class="p">,</span> <span class="mi">3600</span><span class="p">);</span>
</code></pre></div>

<p>
    Retrieving content from cache is done by calling the <code>read</code> method with a string argument representing
    the key that was used to store the content. If no content is available, or if the cached content has expired, this
    method returns <code>false</code>.
</p>

<div class="highlight"><pre><code class="php"><span class="k">echo</span> <span class="nv">$cache</span><span class="o">-&gt;</span><span class="na">read</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">);</span> <span class="c1">//&gt; Hello World!</span>
</code></pre></div>

<p>
    Checking if some content was stored under a certain key is done by calling the <code>has</code> method and passing as an
    argument a string representing the key name you want to check. This method returns <code>false</code> if
    if nothing was stored under the specified key, or if the content expired and <code>true</code> otherwise.
</p>

<div class="highlight"><pre><code class="php"><span class="k">if</span><span class="p">(</span><span class="nv">$cache</span><span class="o">-&gt;</span><span class="na">has</span><span class="p">(</span><span class="s1">&#39;read&#39;</span><span class="p">))</span>
<span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$cache</span><span class="o">-&gt;</span><span class="na">read</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">);</span> <span class="c1">//&gt; Hello World!</span>
<span class="p">}</span>
</code></pre></div>

<p>
    The <code>load</code> method returns the data stored under the specified key, or, if nothing was stored under
    that key, it will store and return the result obtained by calling the given closure with
    a string argument representing the specified key.
</p>

<div class="highlight"><pre><code class="php"><span class="nv">$content</span> <span class="o">=</span> <span class="nv">$cache</span><span class="o">-&gt;</span><span class="na">load</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$key</span><span class="p">){</span>
    <span class="k">return</span> <span class="s1">&#39;Hello Wolrd!&#39;</span><span class="p">;</span>
<span class="p">});</span>
</code></pre></div>

<p>
    Optionally, you can specify how long will be available the content obtained when the given closure was called,
    by passing a third argument to the <code>load</code> method, representing the amount of time expressed in seconds.
</p>

<div class="highlight"><pre><code class="php"><span class="nv">$content</span> <span class="o">=</span> <span class="nv">$cache</span><span class="o">-&gt;</span><span class="na">load</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$key</span><span class="p">){</span>
    <span class="k">return</span> <span class="s1">&#39;Hello Wolrd!&#39;</span><span class="p">;</span>
<span class="p">},</span> <span class="mi">3600</span><span class="p">);</span>
</code></pre></div>

<p>
    Deleting content that was stored under a certain key is done by calling the <code>delete</code>
    method. This method returns <code>true</code> on success and <code>false</code> otherwise.
</p>

<div class="highlight"><pre><code class="php"><span class="nv">$cache</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">);</span>
</code></pre></div>

<p>
    You can delete all cached content by calling the <code>clear</code> method.
    The method returns <code>true</code> on success and <code>false</code> otherwise.
</p>

<div class="highlight"><pre><code class="php"><span class="nv">$cache</span><span class="o">-&gt;</span><span class="na">clear</span><span class="p">();</span>
</code></pre></div>

            





    
        
            
                
            
        
    

    
        
            
        
    

    
        
            
                
                
            
        
    

    


<ul class="pager">
  
  <li class="previous"><a href="/cache" title="About">&larr; Back</a></li>
  
  
  <li class="next"><a href="/cache/collection.html" title="Storage collection">Next &rarr;</a></li>
  
</ul>
            
        </div>
    </div>
</div>
<div id="footer" class="text-center text-muted">
    Copyright &copy; 2014 Marius Sarca. All rights reserved.
</div>

    </body>
</html>
